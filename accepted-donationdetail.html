{% extends 'base-db-admin.html' %}
{% load static %}
{% block main %}
<div class="container mt-5 vh-100 table-responsive">
    <h3>View Accepted Donation Detail</h3>
    <hr>
    
    <form method="POST">
        {% csrf_token %}
        <table id="mytable" class="table table-bordered">
            <tbody>
                <tr class="align-middle text-center table-dark">
                    <th colspan="4"><h3>Donor Details</h3></th>
                </tr>
                <tr class="align-middle text-center">
                    <td><h5>Donor Name</h5></td>
                    <td><h5 class="text-secondary">{{ donation.donor.user.first_name }} {{ donation.donor.user.last_name }}</h5></td>
                    <td><h5>Donor Contact</h5></td>
                    <td><h5 class="text-secondary">{{ donation.donor.contact }}</h5></td>
                </tr>
                <tr class="align-middle text-center">
                    <td><h5>Email</h5></td>
                    <td><h5 class="text-secondary">{{ donation.donor.user.email }}</h5></td>
                    <td><h5>Donor Pic</h5></td>
                    <td>
                        {% if donation.donor.userpic %}
                            <img src="{{ donation.donor.userpic.url }}" width="80" height="80" class="rounded-circle" />
                        {% else %}
                            <img src="{% static 'images/avtar5.png' %}" width="80" height="80" />
                        {% endif %}
                    </td>
                </tr>

                <tr class="align-middle text-center table-dark">
                    <th colspan="4"><h3>Donation Details</h3></th>
                </tr>
                <tr class="align-middle text-center">
                    <td><h5>Donation Name</h5></td>
                    <td><h5 class="text-secondary">{{ donation.donationname }}</h5></td>
                    <td><h5>Donation Pic</h5></td>
                    <td><img src="{{ donation.donationpic.url }}" width="80" height="80" /></td>
                </tr>
                <tr class="align-middle text-center">
                    <td><h5>Collection Location</h5></td>
                    <td><h5 class="text-secondary">{{ donation.collectionloc }}</h5></td>
                    <td><h5>Donation Date</h5></td>
                    <td><h5 class="text-secondary">{{ donation.donationdate }}</h5></td>
                </tr>
                <tr class="align-middle text-center">
                    <td><h5>Status</h5></td>
                    <td>
                        <span class="badge bg-success py-2 px-5 rounded-pill">{{ donation.status|title }}</span>
                    </td>
                    <td><h5>Updation Date</h5></td>
                    <td><h5 class="text-secondary">{{ donation.updationdate }}</h5></td>
                </tr>

                {% if not donation.volunteer %}
                <tr class="align-middle text-center">
                    <td><h5>Admin Remark</h5></td>
                    <td colspan="3">
                        <textarea class="form-control" name="adminremark" rows="3" required></textarea>
                    </td>
                </tr>
                <tr class="align-middle text-center">
                    <td><h5>Select Distribution Area</h5></td>
                    <td colspan="3">
                        <select class="form-control" name="donationareaid" required>
                            <option value="">-- Select Area --</option>
                            {% for area in donationarea %}
                            <option value="{{ area.id }}">{{ area.areaname }}</option>
                            {% endfor %}
                        </select>
                    </td>
                </tr>
                <tr class="align-middle text-center">
                    <td><h5>Select Volunteer</h5></td>
                    <td colspan="3">
                        <select class="form-control" name="volunteerid" required>
                            <option value="">-- Select Volunteer --</option>
                            {% for v in volunteer %}
                            <option value="{{ v.id }}">{{ v.user.first_name }} [{{ v.contact }}]</option>
                            {% endfor %}
                        </select>
                    </td>
                </tr>
                <tr class="align-middle text-center">
                    <td></td>
                    <td colspan="3">
                        <button type="submit" class="btn btn-primary px-5">Update & Allocate</button>
                    </td>
                </tr>
                {% else %}
                <tr class="align-middle text-center">
                    <td><h5>Admin Remark</h5></td>
                    <td colspan="3"><h5 class="text-secondary">{{ donation.adminremark }}</h5></td>
                </tr>
                <tr class="align-middle text-center">
                    <td><h5>Allocated Area</h5></td>
                    <td colspan="3"><h5 class="text-secondary">{{ donation.donationarea.areaname }}</h5></td>
                </tr>
                <tr class="align-middle text-center">
                    <td><h5>Assigned Volunteer</h5></td>
                    <td colspan="3"><h5 class="text-secondary">{{ donation.volunteer.user.first_name }}</h5></td>
                </tr>
                <tr class="align-middle text-center">
                    <td><h5>Volunteer Remark</h5></td>
                    <td colspan="3">
                        <h5 class="text-secondary">
                            {% if donation.volunteerremark %}{{ donation.volunteerremark }}{% else %}Not Updated Yet{% endif %}
                        </h5>
                    </td>
                </tr>
                {% endif %}
            </tbody>
        </table>
    </form>
</div>
{% endblock main %}